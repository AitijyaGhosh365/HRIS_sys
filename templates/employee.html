<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Employee Details - HRIX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 text-gray-800 min-h-screen">

  <!-- Navbar -->
  <div class="navbar bg-white shadow px-6 py-4 mb-8">
    <div class="text-sky-500 text-2xl font-extrabold">HRIX Employee Details</div>
  </div>

  <div class="max-w-6xl mx-auto px-4 space-y-12">
    
    <!-- Employee Info -->
    <section>
      <h2 class="text-2xl font-bold text-sky-600 mb-4">Employee Info</h2>
      <div class="overflow-x-auto bg-white rounded-lg shadow p-4">
        <table class="table w-full">
          <tbody>
            {% for key, value in employee.items() %}
              <tr class="hover:bg-gray-50">
                <th class="font-semibold capitalize text-gray-700">{{ key.replace('_', ' ') }}</th>
                <td>{{ value }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>

    <!-- Attendance Records -->
    <section>
      <h3 class="text-xl font-bold text-sky-600 mb-4">Attendance Records</h3>
      <div class="overflow-x-auto bg-white rounded-lg shadow p-4">
        <table class="table table-zebra w-full">
          <thead class="bg-sky-100 text-sky-700">
            <tr>
              <th>ID</th>
              <th>Date</th>
              <th>Check-in</th>
              <th>Check-out</th>
              <th>Status</th>
              <th>Checkin Location</th>
              <th>Checkout Location</th>
            </tr>
          </thead>
          <tbody>
            {% for att in attendance %}
            <tr>
                <td>{{ att[0] }}</td>
                <td>{{ att[1] or '-' }}</td>
                <td>{{ att[2] or '-' }}</td>
                <td>{{ att[3] or '-' }}</td>
                <td>{{ att[4] or '-' }}</td>
                <td>{{ att[5] or '-' }}</td>
                <td>{{ att[6] or '-' }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>

    <h2 class="text-xl font-bold text-sky-700 mt-8">Attendance Calendar - {{ month_name }} {{ year }}</h2>
    
    <div class="grid grid-cols-7 gap-2 text-center text-gray-800 mt-4">
    {% for day in ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"] %}
    <div class="font-semibold">{{ day }}</div>
    {% endfor %}
    
    {% set first_day_weekday = current_month_dates[0].weekday() %}
    {% set offset = (first_day_weekday + 1) % 7 %}
    {% for _ in range(offset) %}
    <div></div>
    {% endfor %}
    
    {% for day in current_month_dates %}
    {% set status = attendance_map.get(day.strftime('%Y-%m-%d'), 'no-data') %}
    <div class="p-2 rounded text-center
    {% if status == 'present' %} bg-green-100 text-green-700
    {% elif status == 'absent' %} bg-red-100 text-red-700
    {% else %} bg-gray-100 text-gray-700
    {% endif %}">
    {{ day.day }}
</div>
{% endfor %}
</div>

<!-- Legend -->
<div class="flex gap-4 items-center mt-4">
    <div class="flex items-center gap-1">
        <div class="w-4 h-4 bg-green-100 border border-green-300 rounded"></div>
        <span class="text-sm">Present</span>
    </div>
    <div class="flex items-center gap-1">
        <div class="w-4 h-4 bg-red-100 border border-red-300 rounded"></div>
        <span class="text-sm">Absent</span>
    </div>
    <div class="flex items-center gap-1">
        <div class="w-4 h-4 bg-gray-100 border border-gray-300 rounded"></div>
        <span class="text-sm">No data</span>
    </div>
</div>


<!-- Leave Records -->
    <section>
      <h3 class="text-xl font-bold text-sky-600 mb-4">Leave Records</h3>
      <div class="overflow-x-auto bg-white rounded-lg shadow p-4">
        <table class="table table-zebra w-full">
          <thead class="bg-sky-100 text-sky-700">
            <tr>
              <th>Leave Type</th>
              <th>From</th>
              <th>To</th>
            </tr>
          </thead>
          <tbody>
            {% for lv in leaves %}
            <tr>
              <td>{{ lv[0] }}</td>
              <td>{{ lv[1] }}</td>
              <td>{{ lv[2] }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>

        <div class="btn-container">
        <a href="/" class="btn">Back to Dashboard</a>
        <a href="/admin/edit-employee/{{ employee['id'] }}" class="btn">Edit Employee</a>
    </div>

  </div>

</body>
</html>


